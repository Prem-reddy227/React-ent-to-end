<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate EMI Calculator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; }
        header { background: linear-gradient(90deg, #2c3e50, #3498db); color: white; padding: 30px; text-align: center; }
        header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .calculator { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; padding: 40px; }
        .input-group { display: flex; flex-direction: column; gap: 15px; }
        label { font-weight: 600; color: #2c3e50; font-size: 1.1em; }
        input[type="range"] { width: 100%; height: 8px; border-radius: 5px; background: #ddd; outline: none; }
        input[type="range"]::-webkit-slider-thumb { appearance: none; width: 25px; height: 25px; border-radius: 50%; background: #3498db; cursor: pointer; }
        input[type="number"] { padding: 15px; border: 2px solid #e1e8ed; border-radius: 10px; font-size: 1.2em; text-align: center; transition: border-color 0.3s; }
        input[type="number"]:focus { border-color: #3498db; outline: none; }
        .result { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 30px; border-radius: 15px; text-align: center; font-size: 1.5em; font-weight: bold; }
        .suggestions { grid-column: 1 / -1; margin-top: 20px; }
        .suggestion { background: #e8f5e8; padding: 15px; margin: 10px 0; border-radius: 10px; border-left: 5px solid #27ae60; }
        #chartCanvas { width: 100%; height: 300px; border-radius: 15px; margin-top: 20px; }
        @media (max-width: 768px) { .calculator { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üè† Property EMI Calculator</h1>
            <p>Calculate your home loan EMI with breakdown & smart suggestions</p>
        </header>
        
        <div class="calculator">
            <div class="input-group">
                <label>Property Price (‚Çπ)</label>
                <input type="number" id="price" value="5000000" min="100000" max="10000000" step="100000">
                <span id="priceValue">‚Çπ50,00,000</span>
                
                <label>Loan Amount (%)</label>
                <input type="range" id="loanPercent" min="50" max="90" value="80">
                <span id="loanValue">80% (‚Çπ40,00,000)</span>
                
                <label>Interest Rate (% p.a.)</label>
                <input type="number" id="interest" value="8.5" min="6" max="15" step="0.1">
                
                <label>Tenure (Years)</label>
                <input type="number" id="tenure" value="20" min="5" max="30" step="1">
            </div>
            
            <div>
                <div class="result" id="emiResult">EMI: ‚Çπ0<br>Total Interest: ‚Çπ0<br>Total Payment: ‚Çπ0</div>
                <canvas id="chartCanvas"></canvas>
            </div>
        </div>
        
        <div class="suggestions" id="suggestions"></div>
    </div>

    <script>
        const priceInput = document.getElementById('price');
        const loanPercent = document.getElementById('loanPercent');
        const interestInput = document.getElementById('interest');
        const tenureInput = document.getElementById('tenure');
        const priceValue = document.getElementById('priceValue');
        const loanValue = document.getElementById('loanValue');
        const emiResult = document.getElementById('emiResult');
        const suggestions = document.getElementById('suggestions');
        const canvas = document.getElementById('chartCanvas');
        const ctx = canvas.getContext('2d');

        // Update display values
        priceInput.addEventListener('input', updateValues);
        loanPercent.addEventListener('input', updateValues);
        interestInput.addEventListener('input', calculateEMI);
        tenureInput.addEventListener('input', calculateEMI);

        function updateValues() {
            const price = parseFloat(priceInput.value);
            const loanPerc = parseFloat(loanPercent.value);
            const loanAmount = Math.round(price * loanPerc / 100);
            
            priceValue.textContent = `‚Çπ${price.toLocaleString()}`;
            loanValue.textContent = `${loanPerc}% (‚Çπ${loanAmount.toLocaleString()})`;
            calculateEMI();
        }

        function calculateEMI() {
            const principal = parseFloat(priceInput.value) * parseFloat(loanPercent.value) / 100;
            const annualRate = parseFloat(interestInput.value) / 100 / 12;
            const months = parseFloat(tenureInput.value) * 12;
            
            if (isNaN(principal) || isNaN(annualRate) || isNaN(months)) return;
            
            const emi = principal * annualRate * Math.pow(1 + annualRate, months) / (Math.pow(1 + annualRate, months) - 1);
            const totalPayment = emi * months;
            const totalInterest = totalPayment - principal;
            
            emiResult.innerHTML = `
                EMI: ‚Çπ${emi.toLocaleString('en-IN', {maximumFractionDigits: 0})}/month<br>
                Total Interest: ‚Çπ${totalInterest.toLocaleString('en-IN', {maximumFractionDigits: 0})}<br>
                Total Payment: ‚Çπ${totalPayment.toLocaleString('en-IN', {maximumFractionDigits: 0})}
            `;
            
            drawPieChart(principal, totalInterest);
            showSuggestions(principal, emi, totalInterest);
        }

        function drawPieChart(principal, interest) {
            canvas.width = canvas.offsetWidth;
            canvas.height = 300;
            
            const centerX = canvas.width / 2;
            const centerY = 150;
            const radius = 120;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Principal slice (blue)
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 1.4);
            ctx.closePath();
            ctx.fillStyle = '#3498db';
            ctx.fill();
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // Interest slice (orange)
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.arc(centerX, centerY, radius, Math.PI * 1.4, Math.PI * 2.5);
            ctx.closePath();
            ctx.fillStyle = '#e74c3c';
            ctx.fill();
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Principal', centerX - 60, centerY - 20);
            ctx.fillText('Interest', centerX + 60, centerY + 20);
            
            ctx.font = 'bold 20px Arial';
            ctx.fillText('‚Çπ' + principal.toLocaleString('en-IN'), centerX - 60, centerY + 10);
            ctx.fillText('‚Çπ' + interest.toLocaleString('en-IN'), centerX + 60, centerY + 50);
        }

        function showSuggestions(principal, emi, totalInterest) {
            const suggestionsHtml = `
                <div class="suggestion">
                    <strong>üí° Increase Down Payment:</strong> Raising loan % from ${loanPercent.value}% to 70% saves ‚Çπ${Math.round(totalInterest * 0.15).toLocaleString()} in interest
                </div>
                <div class="suggestion">
                    <strong>‚è∞ Shorter Tenure:</strong> Reducing from ${tenureInput.value} to 15 years saves ‚Çπ${Math.round(totalInterest * 0.35).toLocaleString()} interest (EMI: +‚Çπ${Math.round(emi * 0.25).toLocaleString()})
                </div>
                <div class="suggestion">
                    <strong>üí∞ Negotiate Rate:</strong> 0.5% lower rate saves ‚Çπ${Math.round(totalInterest * 0.12).toLocaleString()} over loan life
                </div>
            `;
            suggestions.innerHTML = suggestionsHtml;
        }

        // Initial calculation
        updateValues();
    </script>
</body>
</html>
