<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FlatXchange - Smart EMI + Rent vs Buy Calculator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#3b82f6">
    
    <!-- Font Awesome + Google Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Poppins', sans-serif; 
            line-height: 1.6; color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        /* HEADER */
        .header { 
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            padding: 15px 0; position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .header-container { 
            max-width: 1200px; margin: 0 auto; padding: 0 20px; 
            display: flex; justify-content: space-between; align-items: center;
        }
        .logo { font-size: 28px; font-weight: 700; color: white; text-decoration: none; }
        .nav-menu { display: flex; gap: 30px; list-style: none; }
        .nav-menu a { 
            color: white; text-decoration: none; font-weight: 500; 
            padding: 8px 0; position: relative; transition: all 0.3s;
        }
        .nav-menu a:hover { color: #10b981; }
        @media (max-width: 768px) { 
            .nav-menu { display: none; } 
            .header-container { flex-direction: column; gap: 10px; }
        }

        /* HERO */
        .hero { 
            background: linear-gradient(rgba(30,58,138,0.95), rgba(59,130,246,0.95)), 
                       url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><rect fill="%23f0f9ff" width="1200" height="600"/><path fill="%233b82f6" opacity="0.1" d="M0 300Q200 100 400 300T800 300T1200 300V600H0z"/></svg>');
            background-size: cover; color: white; text-align: center; padding: 100px 20px;
        }
        .hero h1 { font-size: 3.5rem; font-weight: 700; margin-bottom: 20px; }
        .hero p { font-size: 1.3rem; margin-bottom: 30px; opacity: 0.95; }
        .btn-primary { 
            background: linear-gradient(45deg, #10b981, #059669); 
            color: white; padding: 18px 40px; border: none; 
            border-radius: 50px; font-size: 1.1rem; font-weight: 600;
            text-decoration: none; display: inline-block; transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(16,185,129,0.4);
        }
        .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 15px 40px rgba(16,185,129,0.6); }

        /* MAIN CONTENT */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .main-content { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; padding: 60px 0; }
        @media (max-width: 992px) { .main-content { grid-template-columns: 1fr; gap: 30px; } }

        .card { 
            background: white; border-radius: 20px; padding: 40px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.1); border: 1px solid rgba(255,255,255,0.5);
        }
        .card h2, .card h3 { 
            color: #1e3a8a; font-size: 1.8rem; margin-bottom: 25px; 
            display: flex; align-items: center; gap: 12px;
        }
        .card h3 { font-size: 1.4rem; }

        .field { margin-bottom: 25px; }
        .field label { 
            display: flex; justify-content: space-between; align-items: center;
            font-weight: 600; color: #1e3a8a; margin-bottom: 10px; font-size: 15px;
        }
        .field input { 
            width: 100%; padding: 15px 20px; border-radius: 12px; 
            border: 2px solid #e2e8f0; font-size: 16px; transition: all 0.3s;
            background: #fafbff;
        }
        .field input:focus { 
            outline: none; border-color: #3b82f6; box-shadow: 0 0 0 4px rgba(59,130,246,0.1);
            transform: translateY(-1px);
        }
        .field input[type="range"] { 
            height: 10px; background: linear-gradient(to right, #e2e8f0 0%, #3b82f6 100%);
            border-radius: 10px; cursor: pointer;
        }
        .field input[type="range"]::-webkit-slider-thumb {
            appearance: none; width: 24px; height: 24px; background: #3b82f6;
            border-radius: 50%; border: 4px solid white; cursor: pointer;
            box-shadow: 0 4px 12px rgba(59,130,246,0.4);
        }
        .helper-text { font-size: 14px; color: #64748b; margin-top: 5px; }

        /* SUMMARY GRID */
        .summary-grid { 
            display: grid; grid-template-columns: repeat(3,1fr); gap: 20px; margin: 30px 0; 
        }
        .summary-item { 
            background: linear-gradient(135deg, #eff6ff, #dbeafe); padding: 25px; 
            border-radius: 16px; text-align: center; border: 1px solid rgba(59,130,246,0.2);
            transition: all 0.3s;
        }
        .summary-item:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(59,130,246,0.2); }
        .summary-item h3 { color: #1d4ed8; font-size: 13px; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px; }
        .summary-value { font-size: 28px; font-weight: 800; color: #111827; margin-bottom: 5px; }

        /* RENT vs BUY */
        .rent-buy-section { 
            background: linear-gradient(135deg, #f0fdf4, #dcfce7); 
            padding: 30px; border-radius: 20px; margin: 30px 0; 
            border: 3px solid #10b98140;
        }
        .rent-buy-grid { 
            display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; 
        }
        @media (max-width: 768px) { .rent-buy-grid { grid-template-columns: 1fr; } }
        
        .recommendation-card { 
            background: white; padding: 30px; border-radius: 20px; 
            display: flex; gap: 25px; box-shadow: 0 15px 40px rgba(16,185,129,0.25);
            border: 1px solid rgba(16,185,129,0.2);
        }
        .rec-icon { font-size: 40px; flex-shrink: 0; }
        .rec-title-buy { color: #059669; font-size: 22px; font-weight: 700; }
        .rec-title-rent { color: #dc2626; font-size: 22px; font-weight: 700; }
        .rec-title-neutral { color: #64748b; font-size: 22px; font-weight: 700; }
        .rec-details { font-size: 16px; margin-bottom: 12px; line-height: 1.5; }
        .rec-savings { font-size: 26px; font-weight: 800; }

        /* SUGGESTIONS */
        .suggestions-title { font-size: 14px; text-transform: uppercase; color: #64748b; margin-bottom: 20px; font-weight: 600; letter-spacing: 1px; }
        .suggestion { 
            padding: 20px; border-radius: 16px; margin-bottom: 15px; display: flex; gap: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08); transition: all 0.3s;
        }
        .suggestion:hover { transform: translateY(-2px); }
        .suggestion-icon { font-size: 24px; flex-shrink: 0; }
        .suggestion--green { background: linear-gradient(135deg, #ecfdf5, #d1fae5); border-left: 5px solid #10b981; }
        .suggestion--amber { background: linear-gradient(135deg, #fffbeb, #fef3c7); border-left: 5px solid #f59e0b; }
        .suggestion--blue { background: linear-gradient(135deg, #eff6ff, #dbeafe); border-left: 5px solid #3b82f6; }
        .suggestion strong { display: block; color: #111827; font-size: 16px; margin-bottom: 4px; }

        /* LOAN TABLE */
        .loan-options-table { margin-top: 30px; }
        .loan-options-table h4 { color: #1e3a8a; margin-bottom: 20px; }
        .loan-table { 
            width: 100%; border-collapse: collapse; background: white; 
            border-radius: 16px; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.15);
        }
        .loan-table thead th { 
            background: linear-gradient(135deg, #3b82f6, #1e40af); color: white; 
            padding: 20px; text-align: left; font-weight: 600; font-size: 15px;
        }
        .loan-table tbody tr { border-bottom: 1px solid #f1f5f9; transition: all 0.3s; }
        .loan-table tbody tr:hover { background: #f8fafc; transform: scale(1.01); }
        .loan-table td { padding: 20px; vertical-align: middle; }
        .best-option { color: #facc15 !important; font-weight: 800; }

        /* CHART */
        .chart-container { position: relative; height: 400px; margin: 20px 0; }
        .chart-legend { 
            display: flex; gap: 25px; margin-top: 20px; font-size: 15px; color: #374151;
            justify-content: center;
        }
        .legend-dot { width: 14px; height: 14px; border-radius: 50%; display: inline-block; margin-right: 10px; }

        /* PDF SECTION */
        .pdf-section { background: linear-gradient(135deg, #f8fafc, #e2e8f0); padding: 80px 0; text-align: center; }
        .pdf-container { max-width: 1000px; margin: 0 auto; background: white; border-radius: 24px; padding: 60px; box-shadow: 0 30px 80px rgba(0,0,0,0.15); }
        .pdf-viewer { height: 600px; border-radius: 20px; border: 3px solid #e2e8f0; margin: 40px 0; }
        @media (max-width: 768px) { .pdf-viewer { height: 450px; } }

        /* FOOTER */
        .footer { background: #1e293b; color: #94a3b8; padding: 40px 0 20px; text-align: center; }
        .footer-links { display: flex; justify-content: center; gap: 30px; margin: 20px 0; flex-wrap: wrap; }
        .footer-links a { color: #94a3b8; text-decoration: none; transition: color 0.3s; }
        .footer-links a:hover { color: white; }

        /* RESET BUTTON */
        .reset-btn { 
            background: linear-gradient(135deg, #6b7280, #4b5563); color: white; 
            border: none; padding: 12px 24px; border-radius: 12px; 
            font-weight: 600; cursor: pointer; margin-top: 20px;
            transition: all 0.3s;
        }
        .reset-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(107,114,128,0.4); }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="header-container">
            <a href="#" class="logo">üè† FlatXchange</a>
            <ul class="nav-menu">
                <li><a href="#main-content">Calculator</a></li>
                <li><a href="#rent-buy">Rent vs Buy</a></li>
                <li><a href="#loan-options">Loan Options</a></li>
                <li><a href="#pdf-section">Documents</a></li>
            </ul>
        </div>
    </header>

    <!-- HERO -->
    <section class="hero">
        <div class="container">
            <h1>Smart EMI + Rent vs Buy Calculator</h1>
            <p>Find your best option: Buy now and save ‚Çπ25L+ or rent smart? Instant analysis with bank comparisons</p>
            <a href="#main-content" class="btn-primary"><i class="fas fa-rocket"></i> Find Best Option Now</a>
        </div>
    </section>

    <!-- MAIN CONTENT -->
    <div class="container" id="main-content">
        <main class="main-content">
            <!-- INPUTS + SUMMARY + RENT vs BUY -->
            <section class="card">
                <h2><i class="fas fa-sliders-h"></i> Property & Loan Details</h2>
                
                <!-- LOAN INPUTS -->
                <div class="field">
                    <label><span>Property Price (‚Çπ)</span><span id="priceDisplay">‚Çπ50,00,000</span></label>
                    <input type="number" id="price" value="5000000" min="500000" max="100000000" step="50000" />
                    <div class="helper-text">Total property cost you‚Äôre considering</div>
                </div>

                <div class="field">
                    <label><span>Loan Amount (%)</span><span id="loanPercentDisplay">80%</span></label>
                    <input type="range" id="loanPercent" value="80" min="50" max="90" />
                    <div id="loanAmountDisplay" class="helper-text">Loan: ‚Çπ40,00,000 ‚Ä¢ Down Payment: ‚Çπ10,00,000</div>
                </div>

                <div class="field">
                    <label><span>Interest Rate (% p.a.)</span><span class="helper-text">Current market: 8.25-9.25%</span></label>
                    <input type="number" id="interest" value="8.5" min="5" max="15" step="0.1" />
                </div>

                <div class="field">
                    <label><span>Loan Tenure (Years)</span><span class="helper-text">Most choose 15-25 years</span></label>
                    <input type="number" id="tenure" value="20" min="5" max="40" step="1" />
                </div>

                <!-- SUMMARY GRID -->
                <div class="summary-grid" id="summaryGrid">
                    <div class="summary-item">
                        <h3>Monthly EMI</h3>
                        <p id="emiText" class="summary-value">‚Çπ33,253</p>
                    </div>
                    <div class="summary-item">
                        <h3>Total Interest</h3>
                        <p id="interestText" class="summary-value">‚Çπ39,91,200</p>
                    </div>
                    <div class="summary-item">
                        <h3>Total Payment</h3>
                        <p id="totalText" class="summary-value">‚Çπ79,91,200</p>
                    </div>
                </div>

                <!-- RENT vs BUY -->
                <div class="rent-buy-section" id="rent-buy">
                    <h3><i class="fas fa-balance-scale"></i> Rent vs Buy Analysis</h3>
                    <div class="rent-buy-grid">
                        <div class="field">
                            <label><span>Current Monthly Rent (‚Çπ)</span><span id="rentDisplay">‚Çπ35,000</span></label>
                            <input type="number" id="rent" value="35000" min="10000" max="200000" step="1000" />
                        </div>
                        <div class="field">
                            <label><span>Expected Rent Increase (%/year)</span><span class="helper-text">Typical: 5-8%</span></label>
                            <input type="number" id="rentIncrease" value="6" min="0" max="15" step="0.5" />
                        </div>
                    </div>
                    <div id="rentBuyRecommendation" class="recommendation-card">
                        <div class="rec-icon">‚öñÔ∏è</div>
                        <div>
                            <h4 id="recTitle" class="rec-title-neutral">Calculating best option...</h4>
                            <p id="recDetails">Enter rent details for personalized analysis</p>
                            <div id="recSavings"></div>
                        </div>
                    </div>
                </div>

                <!-- PERSONALIZED SUGGESTIONS -->
                <div class="suggestions" id="suggestions">
                    <div class="suggestions-title">üí° Smart Recommendations</div>
                </div>

                <!-- RESET BUTTON -->
                <button class="reset-btn" onclick="resetForm()">
                    <i class="fas fa-refresh"></i> Reset All Calculations
                </button>
            </section>

            <!-- CHART + LOAN COMPARISON -->
            <section class="card">
                <h2><i class="fas fa-chart-pie"></i> Complete Analysis</h2>
                
                <!-- EMI BREAKDOWN CHART -->
                <div style="margin-bottom: 40px;">
                    <h3>EMI Breakdown (Principal vs Interest)</h3>
                    <p style="color: #64748b; margin-bottom: 20px;">
                        Fixed EMI splits into principal repayment + bank interest over entire tenure
                    </p>
                    <div class="chart-container">
                        <canvas id="emiChart"></canvas>
                    </div>
                    <div class="chart-legend">
                        <span><span class="legend-dot" style="background:#3b82f6;"></span> Principal</span>
                        <span><span class="legend-dot" style="background:#f97316;"></span> Interest</span>
                    </div>
                </div>

                <!-- BANK LOAN COMPARISON -->
                <div class="loan-options-table" id="loan-options">
                    <h4><i class="fas fa-bank"></i> Best Bank Loan Options</h4>
                    <table class="loan-table">
                        <thead>
                            <tr>
                                <th>Bank</th>
                                <th>Rate</th>
                                <th>EMI/month</th>
                                <th>Total Interest</th>
                                <th>Recommendation</th>
                            </tr>
                        </thead>
                        <tbody id="loanTableBody">
                            <tr><td colspan="5" style="text-align:center; padding:40px; color:#9ca3b8;">Enter loan details to compare</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- PDF DOCUMENTS -->
    <section class="pdf-section" id="pdf-section">
        <div class="container">
            <div class="pdf-container">
                <h2 style="font-size: 2.8rem; color: #1e3a8a; margin-bottom: 25px;">
                    <i class="fas fa-file-pdf"></i> Property Legal Documents
                </h2>
                <p style="color: #64748b; font-size: 20px; margin-bottom: 40px; max-width: 600px; margin-left: auto; margin-right: auto;">
                    Complete legal documents, floor plans & property brochure
                </p>
                <div class="pdf-viewer" style="background: linear-gradient(135deg, #f8fafc, #e2e8f0); display:flex; align-items:center; justify-content:center; border-radius:20px;">
                    <div style="text-align:center; padding:60px 40px;">
                        <i class="fas fa-file-pdf" style="font-size:100px; color:#d1d5db; margin-bottom:20px;"></i>
                        <h3 style="color:#64748b; margin-bottom:15px;">FlatXchange Property Documents</h3>
                        <p style="color:#9ca3b8; font-size:16px; margin-bottom:30px;">Upload FlatXchange.pdf to enable preview + download</p>
                        <a href="#" class="btn-primary" style="font-size:18px; padding:20px 50px;">
                            <i class="fas fa-download"></i> Download Brochure
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-content">
            <p><strong>FlatXchange</strong> ¬© 2025 - India's Smart Real Estate Platform</p>
            <p style="margin-top:10px; opacity:0.8;">Powered by precise EMI calculations | Helping 10,000+ families find their dream home</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms & Conditions</a>
                <a href="#">Contact Support</a>
                <a href="#">About Us</a>
            </div>
        </div>
    </footer>

    <script>
        // ELEMENTS
        const priceEl = document.getElementById("price");
        const loanPercentEl = document.getElementById("loanPercent");
        const interestEl = document.getElementById("interest");
        const tenureEl = document.getElementById("tenure");
        const rentEl = document.getElementById("rent");
        const rentIncreaseEl = document.getElementById("rentIncrease");

        const priceDisplay = document.getElementById("priceDisplay");
        const loanPercentDisplay = document.getElementById("loanPercentDisplay");
        const loanAmountDisplay = document.getElementById("loanAmountDisplay");
        const rentDisplay = document.getElementById("rentDisplay");

        const emiText = document.getElementById("emiText");
        const interestText = document.getElementById("interestText");
        const totalText = document.getElementById("totalText");
        const suggestionsEl = document.getElementById("suggestions");
        const recTitle = document.getElementById("recTitle");
        const recDetails = document.getElementById("recDetails");
        const recSavings = document.getElementById("recSavings");

        let chart;

        // EMI CALCULATION
        function formatINR(num) {
            if (!isFinite(num)) return "‚Äì";
            return "‚Çπ" + Math.round(num).toLocaleString("en-IN");
        }

        function computeEmi(principal, annualRate, years) {
            const r = annualRate / 100 / 12;
            const n = years * 12;
            if (r === 0) return { emi: principal / n, totalPayment: principal, totalInterest: 0 };
            const factor = Math.pow(1 + r, n);
            const emi = (principal * r * factor) / (factor - 1);
            const totalPayment = emi * n;
            const totalInterest = totalPayment - principal;
            return { emi, totalPayment, totalInterest, r, n };
        }

        // MAIN UPDATE FUNCTION
        function updateUI() {
            const price = Number(priceEl.value) || 0;
            const loanPercent = Number(loanPercentEl.value) || 0;
            const rate = Number(interestEl.value) || 0;
            const years = Number(tenureEl.value) || 0;

            const principal = (price * loanPercent) / 100;

            // Update displays
            priceDisplay.textContent = formatINR(price);
            loanPercentDisplay.textContent = loanPercent + "%";
            loanAmountDisplay.innerHTML = `Loan: ${formatINR(principal)} ‚Ä¢ Down: ${formatINR(price - principal)}`;
            rentDisplay.textContent = formatINR(rentEl.value);

            if (!price || !loanPercent || !rate || !years) return;

            const { emi, totalPayment, totalInterest } = computeEmi(principal, rate, years);

            // Update summary
            emiText.textContent = formatINR(emi);
            interestText.textContent = formatINR(totalInterest);
            totalText.textContent = formatINR(totalPayment);

            // Update visuals
            updateChart(principal, totalInterest);
            renderSuggestions({ price, principal, emi, totalInterest, rate, years });
            analyzeRentVsBuy(price, principal, emi, totalInterest, rate, years);
            generateLoanOptions(principal, years);
        }

        // CHART
        function updateChart(principal, interest) {
            const ctx = document.getElementById("emiChart").getContext("2d");
            const data = {
                labels: ["Principal", "Interest"],
                datasets: [{ data: [principal, interest], backgroundColor: ["#3b82f6", "#f97316"], borderWidth: 0 }]
            };

            if (chart) {
                chart.data = data;
                chart.update();
                return;
            }

            chart = new Chart(ctx, {
                type: "pie",
                data,
                options: {
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ": " + formatINR(context.raw);
                                }
                            }
                        }
                    },
                    animation: { animateRotate: true, duration: 1500 }
                }
            });
        }

        // RENT vs BUY ANALYSIS
        function analyzeRentVsBuy(price, principal, emi, totalInterest, rate, years) {
            const monthlyRent = Number(rentEl.value) || 0;
            const rentIncrease = Number(rentIncreaseEl.value) || 0;
            
            if (!monthlyRent) {
                recTitle.textContent = "Enter rent details";
                recTitle.className = "rec-title rec-title-neutral";
                recDetails.textContent = "Add your current rent to compare with buying";
                recSavings.innerHTML = "";
                return;
            }

            // Total rent over tenure
            let totalRentCost = 0;
            for (let year = 1; year <= years; year++) {
                const annualRent = monthlyRent * 12 * Math.pow(1 + rentIncrease/100, year - 1);
                totalRentCost += annualRent;
            }
            
            const totalBuyCost = principal + totalInterest;
            const annualSavingsBuy = (totalRentCost - totalBuyCost) / years * 12;
            
            const recEl = document.getElementById('rentBuyRecommendation');
            
            if (totalBuyCost < totalRentCost * 0.95) {
                // BUY BETTER
                recTitle.textContent = "‚úÖ BUYING IS 35% BETTER";
                recTitle.className = "rec-title rec-title-buy";
                recDetails.innerHTML = `Save <strong>${formatINR(annualSavingsBuy)}</strong> yearly vs renting`;
                recSavings.innerHTML = `<span style="color:#059669">Total: ${formatINR(totalRentCost - totalBuyCost)} over ${years} yrs</span>`;
                recEl.style.background = 'linear-gradient(135deg, #ecfdf5, #d1fae5)';
            } else if (totalRentCost < totalBuyCost * 0.95) {
                // RENT BETTER
                recTitle.textContent = "üè† RENTING IS SMARTER";
                recTitle.className = "rec-title rec-title-rent";
                recDetails.innerHTML = `Save <strong>${formatINR((totalBuyCost - totalRentCost)/years*12)}</strong> yearly`;
                recSavings.innerHTML = `<span style="color:#dc2626">Rent Advantage: ${formatINR(totalBuyCost - totalRentCost)}</span>`;
                recEl.style.background = 'linear-gradient(135deg, #fef2f2, #fecaca)';
            } else {
                // NEUTRAL
                recTitle.textContent = "‚öñÔ∏è BREAK EVEN";
                recTitle.className = "rec-title rec-title-neutral";
                recDetails.textContent = "Costs are similar over the period";
                recSavings.innerHTML = `Difference: ${formatINR(Math.abs(totalRentCost - totalBuyCost))}`;
                recEl.style.background = 'linear-gradient(135deg, #f8fafc, #e2e8f0)';
            }
        }

        // SMART SUGGESTIONS
        function renderSuggestions({ price, principal, emi, totalInterest, rate, years }) {
            const suggestions = [];

            // Down payment suggestion
            const targetLoanPercent = Math.max(50, Number(loanPercentEl.value) - 10);
            const targetPrincipal = (price * targetLoanPercent) / 100;
            const { totalInterest: targetInterest1 } = computeEmi(targetPrincipal, rate, years);
            const interestSaved1 = totalInterest - targetInterest1;

            suggestions.push(`
                <div class="suggestion suggestion--green">
                    <div class="suggestion-icon">üí∞</div>
                    <div>
                        <strong>Increase Down Payment</strong>
                        ${targetLoanPercent}% loan saves ${formatINR(interestSaved1)} interest
                    </div>
                </div>
            `);

            // Shorter tenure
            const shorterYears = Math.max(5, years - 5);
            const { emi: emiShort, totalInterest: interestShort } = computeEmi(principal, rate, shorterYears);
            const interestSaved2 = totalInterest - interestShort;

            suggestions.push(`
                <div class="suggestion suggestion--amber">
                    <div class="suggestion-icon">‚è±Ô∏è</div>
                    <div>
                        <strong>Shorter Tenure</strong>
                        ${shorterYears} yrs saves ${formatINR(interestSaved2)} (EMI +${formatINR(emiShort-emi)}/mo)
                    </div>
                </div>
            `);

            suggestionsEl.innerHTML = `<div class="suggestions-title">üí° Actionable Recommendations</div>` + suggestions.join("");
        }

        // BANK COMPARISONS
        function generateLoanOptions(principal, years) {
            const banks = [
                { name: 'SBI Home Loan', rate: 8.25 },
                { name: 'HDFC Home Loan', rate: 8.50 },
                { name: 'ICICI Bank', rate: 8.75 },
                { name: 'FlatXchange Best', rate: 8.00 }
            ];
            
            banks.forEach(bank => {
                const { emi, totalInterest } = computeEmi(principal, bank.rate, years);
                bank.emi = emi;
                bank.interest = totalInterest;
            });
            
            const best = banks.reduce((prev, curr) => curr.interest < prev.interest ? curr : prev);
            
            document.getElementById('loanTableBody').innerHTML = banks.map(bank => `
                <tr>
                    <td style="font-weight:600;">${bank.name}</td>
                    <td style="color:#10b981;">${bank.rate}%</td>
                    <td>${formatINR(bank.emi)}</td>
                    <td>${formatINR(bank.interest)}</td>
                    <td style="font-weight:700; ${bank === best ? 'color:#facc15' : 'color:#9ca3b8'}">
                        ${bank === best ? '<i class="fas fa-crown"></i> BEST' : 'Good'}
                    </td>
                </tr>
            `).join('');
        }

        // RESET FORM
        function resetForm() {
            priceEl.value = 5000000;
            loanPercentEl.value = 80;
            interestEl.value = 8.5;
            tenureEl.value = 20;
            rentEl.value = 35000;
            rentIncreaseEl.value = 6;
            updateUI();
        }

        // EVENT LISTENERS
        priceEl.addEventListener("input", updateUI);
        loanPercentEl.addEventListener("input", updateUI);
        interestEl.addEventListener("input", updateUI);
        tenureEl.addEventListener("input", updateUI);
        rentEl.addEventListener("input", updateUI);
        rentIncreaseEl.addEventListener("input", updateUI);

        // INITIAL LOAD
        updateUI();
    </script>
</body>
</html>
